{% extends 'base.html' %}

{% load static %}

{% block title %}Sahlan Hub - {{ title }} {% endblock title %}

{% block content %}

<h2>{{ title }}</h2>


<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div>
        <img id="image-preview" 
             src="{% if image_avatar %}{{ image_avatar }}{% else %}{% static 'img/anonymousUserAvatar.jpeg' %}{% endif %}" 
             alt="{{ user.username }}" width="100px">

        <button type="button" id="change-photo">Change</button>
        <input type="file" id="id_photo" name="image_avatar" accept=".jpg, .jpeg, .png" hidden>
    </div>

    <script>
        document.getElementById('change-photo').addEventListener('click', function () {
            document.getElementById('id_photo').click();
        });

        document.getElementById('id_photo').addEventListener('change', function () {
            const preview = document.getElementById('image-preview');
            preview.src = URL.createObjectURL(this.files[0]);
        });
    </script>

    <div>
        <div>
            <label for="username">User ID: </label>
            {{ user.customer.customer_id }}
        </div>


        <div>
            <label for="username">Username: </label>
            {{ user.username }}
        </div>

        <div>
            <label for="first_name">First Name: </label>
            {{ form.first_name }}
        </div>

        <div>
            <label for="last_name">Last Name: </label>
            {{ form.last_name }}
        </div>

        <div>
            <label for="email">Email: </label>
            {{ user.email }}
            <a href="">Change</a>
        </div>

        <div>
            <label for="tel_no">Phone No: </label>
            {% if user.phone_number %}
            {{ user.phone_number }}
            {% else %}
            -
            {% endif %}
            <a href="">Change</a>
        </div>

        <div>
            <label for="gender">Gender: </label>
            {{ form.gender }}
        </div>

        <div>
            <label for="birthdate">Birthdate: </label>
            {{ form.birthdate }}
        </div>

        <button type="submit" id="save-button">SAVE</button>

    </div>

</form>

{% endblock %}